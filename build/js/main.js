"use strict";

(function () {
  var vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty('--vh', "".concat(vh, "px"));
  var $body = document.querySelector('body');

  function debounce(func) {
    var timer;
    return function (event) {
      if (timer) clearTimeout(timer);
      timer = setTimeout(func, 100, event);
    };
  }

  function Modal(trigger, modal) {
    this.trigger = trigger;
    this.modal = modal;
    this.overlay = this.modal.querySelector('.modal__overlay');
    this.closeBtn = this.modal.querySelector('.modal__close');
    this.onOverlayClick = this.onOverlayClick.bind(this);
    this.onCloseClick = this.onCloseClick.bind(this);
    this.onTriggerClick = this.onTriggerClick.bind(this);
    this.onResize = this.onResize.bind(this);
    this.addEventListeners();
  }

  Modal.prototype.open = function () {
    this.modal.classList.add('js-show');
    $body.classList.add('js__body-no-scroll');
  };

  Modal.prototype.close = function () {
    this.modal.classList.remove('js-show');
    $body.classList.remove('js__body-no-scroll');
  };

  Modal.prototype.onOverlayClick = function (e) {
    if (e.target === this.overlay) {
      this.close();
    }
  };

  Modal.prototype.onCloseClick = function () {
    this.close();
  };

  Modal.prototype.onTriggerClick = function () {
    this.open();
  };

  Modal.prototype.onResize = function () {
    var vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', "".concat(vh, "px"));
  };

  Modal.prototype.addEventListeners = function () {
    this.overlay.addEventListener('click', this.onOverlayClick);
    this.closeBtn.addEventListener('click', this.onCloseClick);
    this.trigger.addEventListener('click', this.onTriggerClick);
    window.addEventListener('resize', debounce(this.onResize));
  };

  window.Modal = Modal;
})();

(function () {
  var items = document.querySelectorAll('.search');
  var close = document.querySelectorAll('.search + .search-close');
  items.forEach(function (item) {
    item.addEventListener('focus', function () {
      item.parentNode.parentNode.classList.add('js-focus');
    });
  });
  items.forEach(function (item) {
    item.addEventListener('blur', function () {
      if (item.value.split(' ').join('') === '') {
        item.value = '';
      }

      if (item.value !== '' && !item.classList.contains('js-inputed')) {
        item.classList.add('js-inputed');
      }

      if (item.value === '' && item.classList.contains('js-inputed')) {
        item.classList.remove('js-inputed');
      }
    });
  });
  close.forEach(function (item) {
    item.addEventListener('click', function () {
      var search = item.previousElementSibling;
      search.value = '';

      if (search.classList.contains('js-inputed')) {
        search.classList.remove('js-inputed');
      }
    });
  });
})();

(function () {})();

(function () {
  $(window).load(function () {
    var swiper = new Swiper('.menu-pa__container', {
      freeMode: true,
      slidesPerView: 'auto',
      breakpoints: {
        1280: {
          freeMode: true,
          slidesPerView: 'auto',
          allowTouchMove: false
        }
      }
    });
  });
})();

(function () {
  var requests = document.querySelectorAll('.request-table__info');
  var modals = document.querySelectorAll('.request-table__modal');

  if (!requests[0]) {
    return;
  }

  requests.forEach(function (item, id) {
    var modal = new Modal(item, modals[id]);
  });
})();

(function () {
  $(window).load(function () {
    var $slider = $('.subscriptions__slider');

    if (!$slider) {
      return;
    }

    console.log($slider);
    var swiper = new Swiper('.subscriptions__slider', {
      mousewheel: true,
      slidesPerView: 'auto',
      freeMode: true,
      watchOverflow: true,
      spaceBetween: 5,
      navigation: {
        nextEl: '.subscriptions__nav-next',
        prevEl: '.subscriptions__nav-prev'
      },
      breakpoints: {
        768: {
          spaceBetween: 15
        },
        1280: {
          spaceBetween: 15,
          slidesPerView: 2,
          freeMode: false
        }
      }
    });
  });
})();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsLmpzIiwic2VhcmNoLmpzIiwiZGV2aWNlLWNhcmQuanMiLCJtZW51LXBhLmpzIiwicmVxdWVzdC10YWJsZS5qcyIsInN1YnNjcmlwdGlvbnMtc2xpZGVyLmpzIl0sIm5hbWVzIjpbInZoIiwid2luZG93IiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsInN0eWxlIiwic2V0UHJvcGVydHkiLCIkYm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJkZWJvdW5jZSIsImZ1bmMiLCJ0aW1lciIsImV2ZW50IiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIk1vZGFsIiwidHJpZ2dlciIsIm1vZGFsIiwib3ZlcmxheSIsImNsb3NlQnRuIiwib25PdmVybGF5Q2xpY2siLCJiaW5kIiwib25DbG9zZUNsaWNrIiwib25UcmlnZ2VyQ2xpY2siLCJvblJlc2l6ZSIsImFkZEV2ZW50TGlzdGVuZXJzIiwicHJvdG90eXBlIiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsImNsb3NlIiwicmVtb3ZlIiwiZSIsInRhcmdldCIsImFkZEV2ZW50TGlzdGVuZXIiLCJpdGVtcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiaXRlbSIsInBhcmVudE5vZGUiLCJ2YWx1ZSIsInNwbGl0Iiwiam9pbiIsImNvbnRhaW5zIiwic2VhcmNoIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsIiQiLCJsb2FkIiwic3dpcGVyIiwiU3dpcGVyIiwiZnJlZU1vZGUiLCJzbGlkZXNQZXJWaWV3IiwiYnJlYWtwb2ludHMiLCJhbGxvd1RvdWNoTW92ZSIsInJlcXVlc3RzIiwibW9kYWxzIiwiaWQiLCIkc2xpZGVyIiwiY29uc29sZSIsImxvZyIsIm1vdXNld2hlZWwiLCJ3YXRjaE92ZXJmbG93Iiwic3BhY2VCZXR3ZWVuIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxDQUFBLFlBQUE7QUFDQSxNQUFBQSxFQUFB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Q0FoQ0EiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIigoKSA9PiB7XG4gIGxldCB2aCA9IHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDE7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS12aCcsIGAke3ZofXB4YCk7XG5cbiAgY29uc3QgJGJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG5cbiAgZnVuY3Rpb24gZGVib3VuY2UoZnVuYyl7XG4gICAgdmFyIHRpbWVyO1xuICAgIHJldHVybiBmdW5jdGlvbihldmVudCl7XG4gICAgICBpZih0aW1lcikgY2xlYXJUaW1lb3V0KHRpbWVyKTtcbiAgICAgIHRpbWVyID0gc2V0VGltZW91dChmdW5jLDEwMCxldmVudCk7XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIE1vZGFsICh0cmlnZ2VyLCBtb2RhbCkge1xuICAgIHRoaXMudHJpZ2dlciA9IHRyaWdnZXI7XG4gICAgdGhpcy5tb2RhbCA9IG1vZGFsO1xuICAgIHRoaXMub3ZlcmxheSA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19vdmVybGF5Jyk7XG4gICAgdGhpcy5jbG9zZUJ0biA9IHRoaXMubW9kYWwucXVlcnlTZWxlY3RvcignLm1vZGFsX19jbG9zZScpO1xuXG4gICAgdGhpcy5vbk92ZXJsYXlDbGljayA9IHRoaXMub25PdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uQ2xvc2VDbGljayA9IHRoaXMub25DbG9zZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgdGhpcy5vblRyaWdnZXJDbGljayA9IHRoaXMub25UcmlnZ2VyQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLm9uUmVzaXplID0gdGhpcy5vblJlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgdGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLm9wZW4gPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm1vZGFsLmNsYXNzTGlzdC5hZGQoJ2pzLXNob3cnKTtcbiAgICAkYm9keS5jbGFzc0xpc3QuYWRkKCdqc19fYm9keS1uby1zY3JvbGwnKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5jbG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMubW9kYWwuY2xhc3NMaXN0LnJlbW92ZSgnanMtc2hvdycpO1xuICAgICRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2pzX19ib2R5LW5vLXNjcm9sbCcpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uT3ZlcmxheUNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gdGhpcy5vdmVybGF5KSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uQ2xvc2VDbGljayA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuY2xvc2UoKTtcbiAgfVxuXG4gIE1vZGFsLnByb3RvdHlwZS5vblRyaWdnZXJDbGljayA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMub3BlbigpO1xuICB9XG5cbiAgTW9kYWwucHJvdG90eXBlLm9uUmVzaXplID0gZnVuY3Rpb24oKSB7XG4gICAgICBsZXQgdmggPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAwLjAxO1xuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KCctLXZoJywgYCR7dmh9cHhgKTtcbiAgfTtcblxuICBNb2RhbC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcnMgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLm92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uT3ZlcmxheUNsaWNrKTtcbiAgICB0aGlzLmNsb3NlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNsb3NlQ2xpY2spO1xuICAgIHRoaXMudHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25UcmlnZ2VyQ2xpY2spO1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBkZWJvdW5jZSh0aGlzLm9uUmVzaXplKSk7XG4gIH1cblxuICB3aW5kb3cuTW9kYWwgPSBNb2RhbDtcbn0pKCk7XG4iLCIoKCkgPT4ge1xuICBjb25zdCBpdGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWFyY2gnKTtcbiAgY29uc3QgY2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2VhcmNoICsgLnNlYXJjaC1jbG9zZScpO1xuXG4gIGl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKCkgPT57XG4gICAgICBpdGVtLnBhcmVudE5vZGUucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdqcy1mb2N1cycpO1xuICAgIH0pO1xuICB9KTtcblxuICBpdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgKCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBpdGVtLnZhbHVlLnNwbGl0KCcgJykuam9pbignJykgPT09ICcnXG4gICAgICApIHtcbiAgICAgICAgaXRlbS52YWx1ZSA9ICcnO1xuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIGl0ZW0udmFsdWUgIT09ICcnXG4gICAgICAgICYmICFpdGVtLmNsYXNzTGlzdC5jb250YWlucygnanMtaW5wdXRlZCcpXG4gICAgICApIHtcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QuYWRkKCdqcy1pbnB1dGVkJyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgaXRlbS52YWx1ZSA9PT0gJydcbiAgICAgICAgJiYgaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLWlucHV0ZWQnKVxuICAgICAgKSB7XG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnanMtaW5wdXRlZCcpO1xuICAgICAgfVxuICAgIH0pXG4gIH0pO1xuXG4gIGNsb3NlLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VhcmNoID0gaXRlbS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgc2VhcmNoLnZhbHVlID0gJyc7XG4gICAgICBpZiAoXG4gICAgICAgIHNlYXJjaC5jbGFzc0xpc3QuY29udGFpbnMoJ2pzLWlucHV0ZWQnKVxuICAgICAgKSB7XG4gICAgICAgIHNlYXJjaC5jbGFzc0xpc3QucmVtb3ZlKCdqcy1pbnB1dGVkJyk7XG4gICAgICB9XG4gICAgfSlcbiAgfSk7XG59KSgpO1xuIiwiKCgpID0+IHtcblxufSkoKTtcbiIsIigoKSA9PiB7XG4gICQod2luZG93KS5sb2FkKGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBzd2lwZXIgPSBuZXcgU3dpcGVyKCcubWVudS1wYV9fY29udGFpbmVyJywge1xuICAgICAgZnJlZU1vZGU6IHRydWUsXG4gICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXG4gICAgICBicmVha3BvaW50czoge1xuXG4gICAgICAgIDEyODA6IHtcbiAgICAgICAgICBmcmVlTW9kZTogdHJ1ZSxcbiAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXG4gICAgICAgICAgYWxsb3dUb3VjaE1vdmU6IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59KSgpO1xuIiwiKCgpID0+IHtcbiAgY29uc3QgcmVxdWVzdHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVxdWVzdC10YWJsZV9faW5mbycpO1xuICBjb25zdCBtb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucmVxdWVzdC10YWJsZV9fbW9kYWwnKTtcblxuICBpZiAoIXJlcXVlc3RzWzBdKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVxdWVzdHMuZm9yRWFjaCgoaXRlbSwgaWQpID0+IHtcbiAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbChpdGVtLCBtb2RhbHNbaWRdKTtcbiAgfSk7XG59KSgpO1xuIiwiKCgpID0+IHtcbiAgJCh3aW5kb3cpLmxvYWQoZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0ICRzbGlkZXIgPSAkKCcuc3Vic2NyaXB0aW9uc19fc2xpZGVyJyk7XG5cbiAgICBpZiAoISRzbGlkZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygkc2xpZGVyKTtcbiAgICBjb25zdCBzd2lwZXIgPSBuZXcgU3dpcGVyKCcuc3Vic2NyaXB0aW9uc19fc2xpZGVyJywge1xuICAgICAgbW91c2V3aGVlbDogdHJ1ZSxcbiAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcbiAgICAgIGZyZWVNb2RlOiB0cnVlLFxuICAgICAgd2F0Y2hPdmVyZmxvdzogdHJ1ZSxcbiAgICAgIHNwYWNlQmV0d2VlbjogNSxcbiAgICAgIG5hdmlnYXRpb246IHtcbiAgICAgICAgbmV4dEVsOiAnLnN1YnNjcmlwdGlvbnNfX25hdi1uZXh0JyxcbiAgICAgICAgcHJldkVsOiAnLnN1YnNjcmlwdGlvbnNfX25hdi1wcmV2JyxcbiAgICAgIH0sXG5cbiAgICAgIGJyZWFrcG9pbnRzOiB7XG4gICAgICAgIDc2ODoge1xuICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTUsXG4gICAgICAgIH0sXG4gICAgICAgIDEyODA6IHtcbiAgICAgICAgICBzcGFjZUJldHdlZW46IDE1LFxuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXG4gICAgICAgICAgZnJlZU1vZGU6IGZhbHNlLFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pXG59KSgpO1xuIl19
